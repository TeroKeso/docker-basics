
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../3_docker-volumes/">
      
      
      <link rel="icon" href="../assets/favicon/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Building Docker Images with Dockerfile - Devcontainer in codespace with Mkdocs Material</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/8.5.0/build.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@6.5.95/css/materialdesignicons.min.css">
    
      <link rel="stylesheet" href="../css/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#building-docker-images-with-dockerfile" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Devcontainer in codespace with Mkdocs Material" class="md-header__button md-logo" aria-label="Devcontainer in codespace with Mkdocs Material" data-md-component="logo">
      
  <img src="../assets/favicon/logo_light_pink.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Devcontainer in codespace with Mkdocs Material
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Building Docker Images with Dockerfile
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/TeroKeso/docker-basics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    TeroKeso/docker-basics
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  1 Getting started

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  2 Docker images

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../3_docker-volumes/" class="md-tabs__link">
        
  
    
  
  3 Docker volumes

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../4_docker-compose/" class="md-tabs__link">
        
  
    
  
  4 Docker compose

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../5_docker-network/" class="md-tabs__link">
        
  
    
  
  5 Docker networks

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Devcontainer in codespace with Mkdocs Material" class="md-nav__button md-logo" aria-label="Devcontainer in codespace with Mkdocs Material" data-md-component="logo">
      
  <img src="../assets/favicon/logo_light_pink.png" alt="logo">

    </a>
    Devcontainer in codespace with Mkdocs Material
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/TeroKeso/docker-basics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    TeroKeso/docker-basics
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 Getting started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    2 Docker images
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    2 Docker images
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this HAMK page">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this HAMK page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-docker-images-with-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      Building Docker Images with Dockerfile
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building Docker Images with Dockerfile">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-an-image" class="md-nav__link">
    <span class="md-ellipsis">
      What is an image?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types-of-images" class="md-nav__link">
    <span class="md-ellipsis">
      Types of Images
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-build-your-own-image" class="md-nav__link">
    <span class="md-ellipsis">
      How to build your own image?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to build your own image?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-a-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      What is a Dockerfile?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-dockerfile-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Dockerfile commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-your-first-image" class="md-nav__link">
    <span class="md-ellipsis">
      Create your first image
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create your first image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-your-first-image" class="md-nav__link">
    <span class="md-ellipsis">
      Build your first image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#push-a-new-version-of-a-docker-image" class="md-nav__link">
    <span class="md-ellipsis">
      Push a new version of a Docker Image
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Push a new version of a Docker Image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#guidelines-to-push-a-new-version" class="md-nav__link">
    <span class="md-ellipsis">
      Guidelines to Push a New Version:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-push-the-new-image-version" class="md-nav__link">
    <span class="md-ellipsis">
      How to Push the New Image Version:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-commands-for-images" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Commands for Images
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../3_docker-volumes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Docker volumes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../4_docker-compose/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 Docker compose
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../5_docker-network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 Docker networks
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/TeroKeso/docker-basics/edit/main/docs/2_docker-images.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/TeroKeso/docker-basics/raw/main/docs/2_docker-images.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


  <h1>2 Docker images</h1>

<h2 id="building-docker-images-with-dockerfile">Building Docker Images with Dockerfile<a class="headerlink" href="#building-docker-images-with-dockerfile" title="anchor link to this section for reference">&para;</a></h2>
<p>Previously, we utilized <strong>images</strong> from the <strong>registry (Dockerhub)</strong> and instructed the Docker client to run a container based on that <strong>image</strong>. In this section, we will learn to create custom Docker images using Dockerfile. </p>
<h3 id="what-is-an-image">What is an image?<a class="headerlink" href="#what-is-an-image" title="anchor link to this section for reference">&para;</a></h3>
<p><strong><em>Docker images</em></strong> are like blueprints that contain the application code, runtime environment, libraries, dependencies, and other configuration required to run an application. They are essential for containerization. Docker images are lightweight, portable, and allow for consistent deployments across different environments.</p>
<p><strong>Let's begin by listing the local images available on the device and understand important concepts about images.</strong></p>
<p><div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>docker<span class="w"> </span>images
</span></code></pre></div>
<strong>Example Output</strong>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>REPOSITORY<span class="w">    </span>TAG<span class="w">       </span>IMAGE<span class="w"> </span>ID<span class="w">       </span>CREATED<span class="w">         </span>SIZE
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>alpine<span class="w">        </span>latest<span class="w">    </span>9c6f07244728<span class="w">   </span><span class="m">2</span><span class="w"> </span>weeks<span class="w"> </span>ago<span class="w">     </span><span class="m">5</span>.54MB
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>hello-world<span class="w">   </span>latest<span class="w">    </span>feb5d9fea6a5<span class="w">   </span><span class="m">11</span><span class="w"> </span>months<span class="w"> </span>ago<span class="w">   </span><span class="m">13</span>.3kB
</span></code></pre></div>
Above is a list of <strong>images</strong> that I've pulled from the registry. You will have a different list of images on your machine. </p>
<ul>
<li>The <code>TAG</code> refers to a particular snapshot of the image and the <code>ID</code> is the corresponding unique identifier for that image.</li>
</ul>
<p><strong>Images</strong> can be <a href="https://docs.docker.com/engine/reference/commandline/commit/">committed</a> with changes and have multiple versions. </p>
<blockquote>
<p>When you do not provide a specific version number, the client defaults to <code>latest</code>.</p>
</blockquote>
<p>For example you could pull a specific version of <code>ubuntu</code> image as follows:</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>docker<span class="w"> </span>pull<span class="w"> </span>ubuntu:24.04
</span></code></pre></div>
<ul>
<li>If you do not specify the version number of the image then, as mentioned, the Docker client will default to a version named <code>latest</code>.</li>
</ul>
<p><strong><em>For example to get the latest version of ubuntu image:</em></strong></p>
<p><div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>docker<span class="w"> </span>pull<span class="w"> </span>ubuntu
</span></code></pre></div>
<strong><em>Some Tips on Docker Images</em></strong>
- You can get a new Docker image  from a registry (such as the <strong>Docker hub</strong>) or create your own. 
- There are hundreds of thousands of images available on <a href="https://store.docker.com">Docker Store</a>. 
- You can also <strong>search for images</strong> directly from the command line using <code>docker search</code>.<br> <br>
 <strong><em>For example, if you want to search a MySQL related Image</em></strong> 
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>docker<span class="w"> </span>search<span class="w"> </span>mysql
</span></code></pre></div>
<strong>Output</strong>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>NAME<span class="w">                            </span>DESCRIPTION<span class="w">                                     </span>STARS<span class="w">     </span>OFFICIAL<span class="w">   </span>AUTOMATED
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>mysql<span class="w">                           </span>MySQL<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>widely<span class="w"> </span>used,<span class="w"> </span>open-source<span class="w"> </span>relation…<span class="w">   </span><span class="m">13077</span><span class="w">     </span><span class="o">[</span>OK<span class="o">]</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>mariadb<span class="w">                         </span>MariaDB<span class="w"> </span>Server<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>high<span class="w"> </span>performing<span class="w"> </span>open<span class="w"> </span>sou…<span class="w">   </span><span class="m">5001</span><span class="w">      </span><span class="o">[</span>OK<span class="o">]</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>phpmyadmin<span class="w">                      </span>phpMyAdmin<span class="w"> </span>-<span class="w"> </span>A<span class="w"> </span>web<span class="w"> </span>interface<span class="w"> </span><span class="k">for</span><span class="w"> </span>MySQL<span class="w"> </span>and<span class="w"> </span>M…<span class="w">   </span><span class="m">614</span><span class="w">       </span><span class="o">[</span>OK<span class="o">]</span><span class="w">       </span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>percona<span class="w">                         </span>Percona<span class="w"> </span>Server<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>fork<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>MySQL<span class="w"> </span>relati…<span class="w">   </span><span class="m">584</span><span class="w">       </span><span class="o">[</span>OK<span class="o">]</span>
</span></code></pre></div></p>
<h3 id="types-of-images">Types of Images<a class="headerlink" href="#types-of-images" title="anchor link to this section for reference">&para;</a></h3>
<ul>
<li>
<p><strong>Base images</strong> are images that have no parent images, usually images with an <code>OS</code> like ubuntu, alpine or debian.</p>
</li>
<li>
<p><strong>Child images</strong> are images that are build on base images and add additional functionality.</p>
</li>
</ul>
<p>Another key concept is the idea of <em>official images</em> and <em>user images</em>. (Both of which can be base images or child images.)</p>
<p><strong>Official images</strong>
- Images that are verified by Docker.
- A dedicated team is responsible for reviewing and publishing all Official Repositories content. 
- <strong><em>Examples:</em></strong> <code>python</code>, <code>node</code>, <code>alpine</code> and <code>nginx</code> images are official (base) images. To find out more about them, check out the <a href="https://docs.docker.com/docker-hub/official_repos/">Official Images Documentation</a>.</p>
<p><strong>User images</strong> 
- Images created and shared by users like you and me. 
- They build on base images and add additional functionality. 
- Typically these are formatted as <code>user/image-name</code>. The <code>user</code> value in the image name is your Dockerhub user or organization name.</p>
<h2 id="how-to-build-your-own-image">How to build your own image?<a class="headerlink" href="#how-to-build-your-own-image" title="anchor link to this section for reference">&para;</a></h2>
<p><strong><em>To build your own image</em></strong>, you will need to write a file called <strong>Dockerfile.</strong> A <strong>Dockerfile</strong> is a simple text file that contains a set of instructions for building a Docker image. It includes step by step instructions on how an image should be built. It defines the <strong>base image</strong> to start from, the application code to include,the dependencies to install and the configuration settings required for the image. </p>
<h3 id="what-is-a-dockerfile">What is a Dockerfile?<a class="headerlink" href="#what-is-a-dockerfile" title="anchor link to this section for reference">&para;</a></h3>
<p>A <strong>Dockerfile</strong> is simply a text file that contains the build instructions for an image. It automates the image creation process.
  - It specifies a base image.
  - It includes instructions to install required tools for your app. 
  - It includes instructions to install libraries, dependencies and packages. 
  - It then builds your app. 
  - It is a step by step set of standard instructions such as <code>FROM</code>, <code>COPY</code>, <code>RUN</code>, <code>ENV</code>, <code>EXPOSE</code>, <code>CMD</code> 
  - The commands you write in a Dockerfile are almost identical to their equivalent Linux commands.
  - The <strong><em>name of the file is</em></strong>  <code>Dockerfile</code> without any extension and the letter <strong>D</strong> is capital. 
  - Write only the minimum set of steps that is needed for your app. Avoid unnecessary components. </p>
<h3 id="basic-dockerfile-commands">Basic Dockerfile commands<a class="headerlink" href="#basic-dockerfile-commands" title="anchor link to this section for reference">&para;</a></h3>
<p><strong><em>FROM</em></strong>
 - The <strong>FROM</strong> command must be the first line in the Dockerfile. Since images are made up of layers, you can utilize one of the official images as the foundation for your own. The <strong>FROM</strong> command defines your <strong>base layer</strong>. </p>
<p>Example:
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>FROM alpine:3.14 
</span></code></pre></div></p>
<blockquote>
<p>The above line specifies that the base image is going to be alpine:3.14. </p>
</blockquote>
<ul>
<li>It accepts the image's name as parameters. You can optionally include the image version and the maintainer's Docker Hub username in the following format:<code>username/imagename:version</code>.</li>
</ul>
<p><strong><em>WORKDIR</em></strong>
- It defines the working directory of a Docker Container.
- Any RUN, CMD, COPY or ENTRYPOINT COMMAND will be executed in the specified working directory.</p>
<p>Example:
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>WORKDIR /usr/src/app/ 
</span></code></pre></div></p>
<blockquote>
<p>The above line sets the working directory to /usr/src/app/within the container.</p>
</blockquote>
<p><strong><em>COPY</em></strong>
- It copies local files or directories from the host machine into the container.
Example:
 COPY <code>&lt;src&gt;</code> <code>&lt;destination&gt;</code></p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a> COPY hello.sh . 
</span></code></pre></div>
<blockquote>
<p>The above line copies the file hello.sh from the current working directory on the host machine into  the current working directory inside the container, in this case: /usr/src/app/</p>
</blockquote>
<p><strong><em>RUN</em></strong>
- It allows you to install your applications and packages you need for your app. 
- For each RUN command, Docker will run the command then create a new layer of the image. 
- The Docker daemon runs instructions in the Docker file one by one. 
- Before running the instructions, the Docker Daemon validates the file and if the syntax is incorrect, it returns an error. 
- Each run instruction is independent and it causes a new image to be created.</p>
<p>Example</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>RUN apk update
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>RUN apk add nano 
</span></code></pre></div>
<blockquote>
<p>The first line <code>RUN apk update</code>  will update the package index of the package manager (apk) within the container and fetches the latest package information from the Alpine package repositories. The second line <code>RUN apk add nano</code> will install the nano text editor inside the container. </p>
</blockquote>
<p><strong><em>Expose</em></strong>
- It tells Docker that the container listens on the specified network ports at runtime.
Example
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>EXPOSE 8000
</span></code></pre></div></p>
<blockquote>
<p>The above line exposes port 8000 to the host and allows incoming connections to the container.</p>
</blockquote>
<p><strong><em>CMD</em></strong>
- It defines the commands that will run when the container starts.
- Unlike a RUN, this does not create a new layer for the Image, but simply runs the command. 
- There can only be one CMD per a Dockerfile/Image. 
- If you need to run multiple commands, the best way to do that is to have the CMD run a script. 
- CMD requires that you tell it where to run the command. 
Example 
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>CMD [&quot;python&quot;, &quot;app.py&quot;]
</span></code></pre></div></p>
<blockquote>
<p>The above line specifies the command <code>python app.py</code> to be executed when the container starts. This will run the python code written in the file app.py.</p>
</blockquote>
<p>These basic Dockerfile command will allow you to create a simple Docker image containing  your application and its dependencies. As you progress with Docker, you'll encounter more advanced commands and options that can be used to fine-tune and optimize your Docker images for different use cases.</p>
<h2 id="create-your-first-image">Create your first image<a class="headerlink" href="#create-your-first-image" title="anchor link to this section for reference">&para;</a></h2>
<p>Now that you have a better understanding of images and Dockerfile, it's time to create our own. Lets build a simple image using <code>Alpine linux</code> as the <code>base image</code> that includes the <code>nano</code> text editor, <code>copies</code> the script named <code>hello.sh</code> into the image and sets it to <code>execute</code> when a container is started from the image. </p>
<p><strong>Step 1: Set up your Project Directory</strong>
You will state by Creating a new directory for your Docker project and navigate to it in your terminal or command prompt.</p>
<p><div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>mkdir<span class="w"> </span>my_docker_project
</span></code></pre></div>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nb">cd</span><span class="w"> </span>my_docker_project
</span></code></pre></div>
<strong>Step 2: Create your application code</strong>
You can create a simple application in your favorite programming language. For this illustration, we'll <strong>write a simple bash script</strong>.Lets create a file called hello.sh with the following content.</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="ch">#!/bin/sh</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Hello, World, I am learning to write a Dockerfile!&quot;</span>
</span></code></pre></div>
<p><strong>Step 3:Create the Docker File</strong>
Now, create a Dockerfile in the same project directory. The name of the file is Dockerfile without any extension. The content of the Dockerfile is as below:</p>
<blockquote>
<p>***Note: Please use IDE such as Visual Studio code to create Dockerfile. Notepad 2024 is a little bit problematic with generating linux native files. Typically Windows generate CRLF and we need the .sh file to be in LF format. ***</p>
</blockquote>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a># Start from the alpine image. It sets  the base image for the Docker image to the 
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a># Alpine Linux version 3.14. It means the new image will be based on the Alpine Linux distribution
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>FROM alpine:3.14 
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a># It defines the working directory inside the container to /usr/src/app/. 
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a># It is the directory where subsequent commands will be executed.
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>WORKDIR /usr/src/app/  
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a># It copies the script file hello.sh from the build context (the directory containing the Dockerfile) 
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a># into the /usr/src/app/ directory inside the container. 
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a># The dot (.) represents the current working directory inside the container, /usr/src/app/
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>COPY hello.sh .
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>#  It updates the package index of the package manager (apk) within the container.
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>RUN apk update
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a># It installs the nano text editor inside the container.
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a>RUN apk add nano 
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>
</span><span id="__span-15-20"><a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a># It adds executable permission to the script hello.sh inside the container. 
</span><span id="__span-15-21"><a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a># It allows the script to be executed as a command.
</span><span id="__span-15-22"><a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a>RUN chmod +x hello.sh 
</span><span id="__span-15-23"><a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a>
</span><span id="__span-15-24"><a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a># It sets the default command to be executed when a container starts from the built image. In this case, it runs the hello.sh script.
</span><span id="__span-15-25"><a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a>
</span><span id="__span-15-26"><a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a>CMD [&quot;./hello.sh&quot;]
</span></code></pre></div>
<p><strong>Step 4:Build the Docker Image</strong></p>
<h3 id="build-your-first-image">Build your first image<a class="headerlink" href="#build-your-first-image" title="anchor link to this section for reference">&para;</a></h3>
<p>Now that our docker file is ready, we will use <strong><em><a href="https://docs.docker.com/engine/reference/commandline/build/">docker build</a></em></strong> command to build our image. </p>
<p>The following <strong>docker build</strong> command will look for the <code>Dockerfile</code> and build as per instructions in the Dockerfile. The (.) specifies where to build and -t  flag tags the image with the name "my-first-image".</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-first-image<span class="w"> </span>.
</span></code></pre></div>
<p><strong>Step 5:Run the Docker Container</strong> </p>
<p>Once the image is successfully built, you can run a container using the following command: 
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>docker<span class="w"> </span>run<span class="w"> </span>my-first-image
</span></code></pre></div>
<strong>Step 6: Access the interactive terminal and use nano to create a text file called new.txt</strong></p>
<p><div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>my-first-image<span class="w"> </span>/bin/sh
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>nano<span class="w"> </span>new.txt
</span></code></pre></div>
<strong><em>Congratulations! You have successfully created your first Docker image and deployed it as a container.</em></strong></p>
<p><strong><em>Read More at <a href="https://docs.docker.com/engine/reference/builder/">Docker File Reference Page</a></em></strong></p>
<p><strong><em>Lets check our image and note the size of the image (my-first-image). It is 15.8MB</em></strong> 
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a> docker images
</span></code></pre></div></p>
<p><strong><em>Lets remove the nano from our Dockerfile</em></strong></p>
<p><div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a># Start from the alpine image 
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>FROM alpine:3.14 
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a># it defines the working directory
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>WORKDIR /usr/src/app/  
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a># copies the script file to the container
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>COPY hello.sh .
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a># Installs updates &amp;  it adds executable permission to our script hello.sh (no nano this time)
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>RUN apk update &amp;&amp; \
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>chmod +x hello.sh 
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a># it runs the script at the start-up
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>CMD [&quot;./hello.sh&quot;]
</span></code></pre></div>
<strong><em>Now build the image again  as my-first-image2 without nano. Since vi is already available, we don't necessarily need the nano text editor.</em></strong>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a> docker build . -t my-first-image2
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a> ```
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>***Check the size of image***
</span></code></pre></div>
docker images
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>When you remove the instruction to install `nano` in the Dockerfile, the size of the resulting Docker image decreases because the image no longer includes the `nano` text editor.
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>Here&#39;s why the size reduction occurs:
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>1. **Layering in Docker**: Each instruction in a Dockerfile creates a new layer in the Docker image. Layers are stackable, and each layer represents a change or modification to the image. When you install `nano` using the `RUN apk add nano` instruction, it adds a layer to the image containing the installed package.
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>2. **Image Size**: Docker images are composed of multiple layers. Each layer contributes to the overall size of the image. When you remove the instruction to install `nano`, that layer is no longer present in the image, resulting in a smaller image size.
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>By minimizing the number of unnecessary layers and reducing the size of the Docker image, you can create more efficient and lightweight images. This practice is particularly important when building production-ready containers to optimize resource usage and improve deployment times.
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>## Push your first image
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>Now that we have created and tested our image, we can push it to [Docker Hub](https://hub.docker.com/). You need to login to the Docker Hub which means you need to have a Docke Hub account. 
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a>***Step 1:  Login to Docker Hub (use your email id instead of username)***
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>```bash
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>docker login
</span></code></pre></div>
Enter <code>Your_DockerHUb_Email_ID</code> and <code>password</code> when prompted. 
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="w"> </span>docker<span class="w"> </span>login
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>Login<span class="w"> </span>with<span class="w"> </span>your<span class="w"> </span>Docker<span class="w"> </span>ID<span class="w"> </span>to<span class="w"> </span>push<span class="w"> </span>and<span class="w"> </span>pull<span class="w"> </span>images<span class="w"> </span>from<span class="w"> </span>Docker<span class="w"> </span>Hub.<span class="w"> </span>If<span class="w"> </span>you<span class="w"> </span>don<span class="err">&#39;</span>t<span class="w"> </span>have<span class="w"> </span>a<span class="w"> </span>Docker<span class="w"> </span>ID,<span class="w"> </span>head<span class="w"> </span>over<span class="w"> </span>to<span class="w"> </span>https://hub.docker.com<span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>one.
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>Username:<span class="w"> </span>youremail@email.com
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>Password:<span class="w"> </span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>Login<span class="w"> </span>Succeeded
</span></code></pre></div>
<strong><em>Step 2:  Tag Your Image</em></strong></p>
<ul>
<li>You are required to tag the image with your Docker Hub username and repository name </li>
</ul>
<p><strong>DockerHubusername/imagename:tag</strong></p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>docker<span class="w"> </span>tag<span class="w">  </span>my-first-image2<span class="w"> </span>deepakkc/my-first-image2
</span></code></pre></div>
<p><strong><em>Step 3:  Push Your Image</em></strong>
- Push the tagged image to Docker Hub.
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>docker push deepakkc/my-first-image2
</span></code></pre></div>
<strong>Now yow you may delete your image and run it again. This time it will pull image from Docker Hub.</strong></p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>docker rmi deepakkc/my-first-image2 -f
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>docker run deepakkc/my-first-image2
</span></code></pre></div>
<blockquote>
<p>Note: if you don't have an account, visit <a href="hhttps://hub.docker.com/">Docker Hub</a> and create an account. </p>
</blockquote>
<h3 id="push-a-new-version-of-a-docker-image">Push a new version of a Docker Image<a class="headerlink" href="#push-a-new-version-of-a-docker-image" title="anchor link to this section for reference">&para;</a></h3>
<p>When you update your application, fix bugs, implement security updates, or make configuration changes, you may need to push a new version of the Docker image. This ensures that your containers are running with the latest changes and improvements in your application.</p>
<h4 id="guidelines-to-push-a-new-version">Guidelines to Push a New Version:<a class="headerlink" href="#guidelines-to-push-a-new-version" title="anchor link to this section for reference">&para;</a></h4>
<ol>
<li>
<p><strong>Update the Application</strong>: Make necessary changes and improvements to your application code.</p>
</li>
<li>
<p><strong>Fix Bugs</strong>: Address and resolve any known bugs or issues in your application.</p>
</li>
<li>
<p><strong>Implement Security Updates</strong>: Apply security patches and updates to protect against vulnerabilities.</p>
</li>
<li>
<p><strong>Configure Changes</strong>: Make adjustments to configurations or environment variables as needed.</p>
</li>
</ol>
<h4 id="how-to-push-the-new-image-version">How to Push the New Image Version:<a class="headerlink" href="#how-to-push-the-new-image-version" title="anchor link to this section for reference">&para;</a></h4>
<ol>
<li><strong>Build the Image</strong>: Use the <code>docker build</code> command to build the updated Docker image.
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>docker build -t my-first-image2:v1.1 .
</span></code></pre></div></li>
<li><strong>Tag the Image with a New Version</strong>: Tag the new image version using <code>docker tag</code> with a relevant version number or tag.</li>
</ol>
<p><div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>docker tag old_image_name:old_version new_image_name:new_version
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>docker tag my-first-image2 deepakkc/my-first-image2:v1.1
</span></code></pre></div>
Replace old_image_name and old_version with the current image name and version, and set new_image_name and new_version to the desired new name and version for the image.</p>
<ol>
<li><strong>Push to Registry</strong>: Use <code>docker push</code> to upload the new image version to your container registry.
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>docker push deepakkc/my-first-image2:v1.1 
</span></code></pre></div>
If you haven't logged in to the container registry where you want to push the image, use the docker login command to authenticate and then push the new image version:</li>
</ol>
<p><div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>docker login
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>docker push new_image_name:new_version
</span></code></pre></div>
By following these steps, you can keep your Docker image up-to-date with the latest changes and improvements in your application, ensuring that your containers run with the most recent version of the code and configurations.</p>
<blockquote>
<p><strong><em>Now that you are done with this container, stop and remove it since you won't be using it again.</em></strong></p>
<p><strong>Note:</strong> If you want to learn more about Dockerfiles, check out <a href="https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/">Best practices for writing Dockerfiles</a>.</p>
</blockquote>
<h2 id="docker-commands-for-images">Docker Commands for Images<a class="headerlink" href="#docker-commands-for-images" title="anchor link to this section for reference">&para;</a></h2>
<ol>
<li><code>docker images</code>: List all locally available Docker images.</li>
<li>
<p>Example: <code>docker images</code></p>
</li>
<li>
<p><code>docker pull</code>: Pull an image from a container registry.</p>
</li>
<li>
<p>Example: <code>docker pull nginx</code></p>
</li>
<li>
<p><code>docker build</code>: Build a Docker image from a Dockerfile.</p>
</li>
<li>
<p>Example: <code>docker build -t myapp:latest .</code></p>
</li>
<li>
<p><code>docker push</code>: Push an image to a container registry.</p>
</li>
<li>
<p>Example: <code>docker push myusername/myapp:latest</code></p>
</li>
<li>
<p><code>docker rmi</code>: Remove one or more Docker images from the local machine.</p>
</li>
<li>
<p>Example: <code>docker rmi myapp:latest</code></p>
</li>
<li>
<p><code>docker tag</code>: Tag an existing image to give it a new name or version.</p>
</li>
<li>
<p>Example: <code>docker tag myapp:latest myapp:v1.0</code></p>
</li>
<li>
<p><code>docker history</code>: Show the history of an image, including its layers and sizes.</p>
</li>
<li>
<p>Example: <code>docker history myapp:latest</code></p>
</li>
<li>
<p><code>docker inspect</code>: Display detailed information about an image.</p>
</li>
<li>
<p>Example: <code>docker inspect myapp:latest</code></p>
</li>
<li>
<p><code>docker search</code>: Search for Docker images in a public container registry like Docker Hub.</p>
</li>
<li>
<p>Example: <code>docker search ubuntu</code></p>
</li>
<li>
<p><code>docker save</code>: Save one or more images to a tar archive.</p>
<ul>
<li>Example: <code>docker save -o my_images.tar myapp:latest myotherapp:latest</code></li>
</ul>
</li>
<li>
<p><code>docker load</code>: Load an image or images from a tar archive.</p>
<ul>
<li>Example: <code>docker load -i my_images.tar</code></li>
</ul>
</li>
<li>
<p><code>docker prune</code>: Remove all unused images, networks, and containers (careful with this command).</p>
<ul>
<li>Example: <code>docker system prune</code></li>
</ul>
</li>
</ol>
<h2 id="exercise">Exercise<a class="headerlink" href="#exercise" title="anchor link to this section for reference">&para;</a></h2>
<ol>
<li><strong><em>Task 1: Building and Pushing a Docker Image</em></strong></li>
</ol>
<p>Write a Dockerfile to build a Docker image using Ubuntu. Include the MySQL database service in your image and push it to DockerHub. Tag the image as "username/ubuntuMySQL:1.1".</p>
<ol>
<li><strong>Task 2: Running and Verifying the Image</strong></li>
</ol>
<p>Run the Docker image you pushed to DockerHub. Access the interactive terminal and verify that MySQL is installed (type <code>sudo mysql</code> in the terminal). If you get the MySQL prompt, it means it's installed. To exit, type <code>exit</code>.</p>
<ol>
<li><strong>Task 3: Dockerfile with CMD Instruction</strong></li>
</ol>
<p>Write a Dockerfile that creates an image with a CMD instruction of your choice. Use the Alpine image as the base image.</p>
<ol>
<li><strong>Task 4: Dockerfile with Working Directory and RUN</strong></li>
</ol>
<p>Continue working on the Dockerfile from Task 3. Specify a working directory (WORKDIR) as "/opt" and use the RUN instruction to write "This is my work directory" in a text file named "test.txt" (<code>echo "This is my work Directory" &gt; test.txt</code>). Build the Docker image with the tag "workdir:v1" and run the image as <code>docker run -it workdir:v1 ls</code>. Make sure to find "test.txt" in the output.</p>
<ol>
<li><strong>Task 5: Docker Image with Simple Java App</strong></li>
</ol>
<p>Write a Dockerfile to build a Docker image that runs a simple Java app in a Docker container.</p>
<ol>
<li><strong>Task 6: Cleanup</strong></li>
</ol>
<p>To clean up, you may delete unnecessary containers with the following command: 
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>docker rm -f $(docker ps -aq)
</span></code></pre></div></p>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: 1 Getting started">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                1 Getting started
              </div>
            </div>
          </a>
        
        
          
          <a href="../3_docker-volumes/" class="md-footer__link md-footer__link--next" aria-label="Next: 3 Docker volumes">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                3 Docker volumes
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 <a href="https://www.hamk.fi/en/" target="blank" >Häme University of Applied Sciences (HAMK)</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://learn.hamk.fi/" target="_blank" rel="noopener" title="learn.hamk.fi" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m1.135 5.74.035.123-2.736 1.99c.369.261.796.61 1.007.844l.077.104C10.23 11.058 7.78 11.857 5.2 10.982l.02-.16h-.002A6.5 6.5 0 0 1 5.16 9.36c-.75-.003-1.53-.04-2.283-.066l-.516.018c-.1.844-.035 2.135-.025 2.322.35 1.282.298 2.29.295 3.53-.413-1.004-.9-2.098-.416-3.468l-.01-.318c0-.014-.068-1.153.037-2.062l-.408.013-.037-.119C5.792 6.84 8.503 6.218 13.135 5.74m1.623 2.514q1.83 0 2.904.807 1.22.9 1.22 2.658v5.685h-2.734v-5.369q0-1.683-1.39-1.683-1.391 0-1.39 1.683v5.37h-2.735v-5.37q-.001-.776-.293-1.193a5.5 5.5 0 0 0 1.572-1.725q.046.044.088.088.756-.952 2.758-.951m-9.61 3.234c.932.3 1.862.393 2.737.287a4 4 0 0 0-.01.26v5.37H5.143v-5.686q0-.118.005-.23"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/school/hamk/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
    <a href="" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.tabs.link", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view", "navigation.tabs", "navigation.sections", "navigation.top", "navigation.footer", "search", "search.sidebar", "search.suggest", "search.highlight", "toc.integrate"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../js/custom.js"></script>
      
    
  </body>
</html>